1
00:00:00,000 --> 00:00:04,000
In the last section, you learned the fundamentals

2
00:00:04,000 --> 00:00:08,000
of unit testing. However, in that section, our

3
00:00:08,000 --> 00:00:12,000
focus was purely on testing utility classes that

4
00:00:12,000 --> 00:00:16,000
didn't have any external dependencies like files, databases,

5
00:00:16,000 --> 00:00:20,000
web servers, and so on. But in the real world, our applications

6
00:00:20,000 --> 00:00:24,000
almost always use one or more of these external resources.

7
00:00:24,000 --> 00:00:28,000
So, you might be wondering how we can unit test a class

8
00:00:28,000 --> 00:00:32,000
that depends on an external resource. Well,

9
00:00:32,000 --> 00:00:36,000
as I told you before. Your unit test should not touch external

10
00:00:36,000 --> 00:00:40,000
resources. A test that touches an external resource

11
00:00:40,000 --> 00:00:44,000
is classified as an integration test, which is a separate topic.

12
00:00:44,000 --> 00:00:48,000
But you can still unit test the logic in your classes, while

13
00:00:48,000 --> 00:00:52,000
excluding their external dependencies. And, that's what you're going to learn

14
00:00:52,000 --> 00:00:56,000
in this section. So here's a basic principle. Imagine

15
00:00:56,000 --> 00:01:00,000
you have a class called video service. This class uses

16
00:01:00,000 --> 00:01:04,000
the file class to read the content of a file. In your application,

17
00:01:04,000 --> 00:01:08,000
this video service may use the db context class to edit a (?)

18
00:01:08,000 --> 00:01:12,000
framework to read a record from the database, so it has a

19
00:01:12,000 --> 00:01:16,000
dependency to an external resource. In order to unit test the

20
00:01:16,000 --> 00:01:20,000
video service class, you should do some surgery in your code and

21
00:01:20,000 --> 00:01:24,000
decouple the video service from the file class or db context

22
00:01:24,000 --> 00:01:28,000
or whatever that external dependency is. This way

23
00:01:28,000 --> 00:01:32,000
when unit testing this class, you can replace the file class with

24
00:01:32,000 --> 00:01:36,000
another class that looks like the file class from the outside, but doesn't

25
00:01:36,000 --> 00:01:40,000
talk to the file system. In fact, it doesn't do anything, its like a class

26
00:01:40,000 --> 00:01:44,000
with a bunch of methods that have no implementation. We call

27
00:01:44,000 --> 00:01:48,000
this class a fake, or a test double, just like a stunt double

28
00:01:48,000 --> 00:01:52,000
in movies. In action scenes, a stunt double who

29
00:01:52,000 --> 00:01:56,000
replaces the hero of the movie, right? We have the same concept here.

30
00:01:56,000 --> 00:02:00,000
When unit testing classes with external dependencies, we replace

31
00:02:00,000 --> 00:02:04,000
a production object with a test double, or fake object.

32
00:02:04,000 --> 00:02:08,000
Okay, but now you might be asking, how should we do that, that requires

33
00:02:08,000 --> 00:02:12,000
surgery to decouple our classes from their external resources.

34
00:02:12,000 --> 00:02:16,000
That's the topic for the next lecture.



